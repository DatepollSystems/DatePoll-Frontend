<mat-card class="mat-elevation-z3">
  <mat-card-content>

    <div class="row justify-content-between">
      <div class="col-12 col-sm-12 col-md-8 col-lg-8 col-xl-8">
        <h1>{{'NAV_EVENTS_ADMINISTRATION' | translate}}</h1>
      </div>
      <div class="col-12 col-sm-12 col-md-4 col-lg-4 col-xl-4" style="text-align: end">
        <button mat-stroked-button style="margin-right: 15px;" (click)="onShowStandardDecisionManagementModal()">
          {{'EVENTS_STANDARD_DECISIONS_MANAGEMENT' | translate}}
        </button>

        <button mat-icon-button [matMenuTriggerFor]="menu">
          <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="refreshEvents()">
            <mat-icon>refresh</mat-icon>
            <span>{{'EVENTS_ADMINISTRATION_MENU_REFRESH' | translate}}</span>
          </button>
          <div mat-menu-item>
            <mat-slide-toggle color="primary" (change)="onShowAllEventsChange($event)" [(ngModel)]="showAllEvents">
              {{'EVENTS_ADMINISTRATION_MENU_SHOW_ALL_EVENTS' | translate}}
            </mat-slide-toggle>
          </div>
        </mat-menu>
      </div>
    </div>

    <div class="row" style="margin-bottom: 15px;">
      <div class="col-2 col-sm-4 col-lg-1">
        <button mat-fab color="accent" (click)="onCreate()">
          <mat-icon>add</mat-icon>
        </button>
      </div>
      <div class="col-10 col-sm-8 col-lg-11">
        <mat-form-field class="col-12">
          <input matInput (keyup)="applyFilter($event.target.value)"
                 placeholder="{{'SEARCH' | translate}}">
        </mat-form-field>
      </div>
    </div>

    <table mat-table [dataSource]="dataSource" matSort class="table-responsive">
      <!-- Name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef
            mat-sort-header> {{'EVENTS_ADMINISTRATION_TABLE_NAME' | translate}} </th>
        <td mat-cell *matCellDef="let event"> {{event.name}} </td>
      </ng-container>

      <!-- Date Column -->
      <ng-container matColumnDef="startDate">
        <th mat-header-cell *matHeaderCellDef
            mat-sort-header> {{'EVENTS_ADMINISTRATION_TABLE_START_DATE' | translate}} </th>
        <td mat-cell *matCellDef="let event"> {{event.startDate | date:'dd.MM.yyyy HH:mm'}} </td>
      </ng-container>

      <ng-container matColumnDef="endDate">
        <th mat-header-cell *matHeaderCellDef
            mat-sort-header> {{'EVENTS_ADMINISTRATION_TABLE_END_DATE' | translate}} </th>
        <td mat-cell *matCellDef="let event"> {{event.endDate | date:'dd.MM.yyyy HH:mm'}} </td>
      </ng-container>

      <!-- Description Column -->
      <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef
            mat-sort-header> {{'EVENTS_ADMINISTRATION_TABLE_DESCRIPTION' | translate}} </th>
        <td mat-cell *matCellDef="let event"> {{event.descriptionPreview}} </td>
      </ng-container>

      <!-- Action movie Column -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef> {{'ACTION' | translate}} </th>
        <td mat-cell *matCellDef="let event" (click)="$event.stopPropagation()">
          <button mat-icon-button (click)="onInfo(event)"
                  matTooltip="{{'EVENTS_ADMINISTRATION_TABLE_ACTION_TOOLTIP_INFO' | translate}}">
            <mat-icon>info</mat-icon>
          </button>

          <button mat-icon-button color="accent" (click)="onEdit(event)"
                  matTooltip="{{'EVENTS_ADMINISTRATION_TABLE_ACTION_TOOLTIP_EDIT' | translate}}">
            <mat-icon>create</mat-icon>
          </button>

          <button mat-icon-button color="warn" (click)="onDelete(event.id)"
                  matTooltip="{{'EVENTS_ADMINISTRATION_TABLE_ACTION_TOOLTIP_DELETE' | translate}}">
            <mat-icon>delete</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="onInfo(row)"></tr>
    </table>
    <mat-progress-bar *ngIf="!eventsLoaded" mode="indeterminate"></mat-progress-bar>

    <mat-paginator [pageSizeOptions]="[10, 20, 50, 100]" showFirstLastButtons></mat-paginator>


  </mat-card-content>
</mat-card>
