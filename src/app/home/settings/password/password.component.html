<h2 mat-dialog-title>{{'SETTINGS_SECURITY_CHANGE_PASSWORD' | translate}}</h2>
<mat-dialog-content>
  <mat-vertical-stepper #stepper [linear]="true">
    <mat-step [editable]="false">
      <ng-template matStepLabel>{{'SETTINGS_SECURITY_MODAL_CHANGE_PASSWORD_TITLE_START' | translate}}</ng-template>
      <mat-card class="error-mat-card" *ngIf="showOldPasswordIncorrectCard" matRipple>
        <mat-card-content class="last-child">
          {{'SETTINGS_SECURITY_MODAL_CHANGE_PASSWORD_OLD_PASSWORD_INCORRECT' | translate}}
        </mat-card-content>
      </mat-card>

      <form #checkOldPasswordForm="ngForm" (ngSubmit)="checkOldPassword()">
        <mat-form-field class="col-12">
          <input matInput id="oldPassword" name="oldPassword" type="password"
                 ngModel [(ngModel)]="oldPassword" required
                 placeholder="{{'SETTINGS_SECURITY_MODAL_CHANGE_PASSWORD_OLD_PASSWORD' | translate}}"/>
        </mat-form-field>

        <mat-progress-bar mode="indeterminate" *ngIf="showCheckingOldPasswordSpinner"></mat-progress-bar>

        <button mat-button type="submit"
                [disabled]="!checkOldPasswordForm.form.valid" *ngIf="!showCheckingOldPasswordSpinner">
          {{'NEXT' | translate}}
        </button>
      </form>
    </mat-step>

    <mat-step [editable]="false">
      <ng-template matStepLabel>{{'SETTINGS_SECURITY_MODAL_CHANGE_PASSWORD_TITLE_NEW_PASSWORD' | translate}}</ng-template>

      <form #changePasswordForm="ngForm" (ngSubmit)="changePassword()">
        <mat-form-field class="col-12">
          <input matInput id="newPassword" name="newPassword" type="password"
                 ngModel [(ngModel)]="newPassword" required #passwordModel="ngModel"
                 placeholder="{{'SETTINGS_SECURITY_MODAL_CHANGE_PASSWORD_NEW_PASSWORD' | translate}}"/>
        </mat-form-field>
        <mat-form-field class="col-12">
          <input matInput id="newPassword_repeat" name="newPassword_repeat" type="password"
                 ngModel [(ngModel)]="newPasswordRepeat" #newPasswordRepeatModel="ngModel" [equalTo]="passwordModel"
                 placeholder="{{'SETTINGS_SECURITY_MODAL_CHANGE_PASSWORD_NEW_PASSWORD_REPEAT' | translate}}" />
          <mat-error *ngIf="newPasswordRepeatModel.errors?.equalTo">
            {{'SETTINGS_SECURITY_MODAL_CHANGE_PASSWORD_NEW_PASSWORDS_ARE_NOT_EQUAL' | translate}}
          </mat-error>
        </mat-form-field>

        <mat-progress-bar mode="indeterminate" *ngIf="showChangingPasswordSpinner"></mat-progress-bar>

        <button mat-button type="submit"
                [disabled]="!changePasswordForm.form.valid" *ngIf="!showChangingPasswordSpinner">
          {{'NEXT' | translate}}
        </button>
      </form>
    </mat-step>

    <mat-step [editable]="false">
      <ng-template matStepLabel>{{'DONE' | translate}}</ng-template>
      <mat-card class="success-mat-card" matRipple>
        <mat-card-content class="last-child">
          {{'SETTINGS_SECURITY_MODAL_CHANGE_PASSWORD_FINISHED' | translate}}
        </mat-card-content>
      </mat-card>
    </mat-step>
  </mat-vertical-stepper>
</mat-dialog-content>
<mat-dialog-actions align="end">
  <button mat-button mat-dialog-close>{{'CLOSE' | translate}}</button>
</mat-dialog-actions>
